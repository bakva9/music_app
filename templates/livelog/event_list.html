{% extends "base.html" %}

{% block title %}ライブ記録 - MusicApp{% endblock %}

{% block content %}
<div class="flex justify-between items-center mb-6">
    <h1 class="text-2xl font-bold">ライブ記録</h1>
    <div class="flex gap-3">
        <a href="{% url 'livelog:expense_list' %}" class="text-sm text-primary-600 dark:text-primary-400 hover:underline">費用一覧</a>
        <a href="{% url 'livelog:event_create' %}" class="bg-primary-600 text-white px-4 py-2 rounded-lg hover:bg-primary-700 text-sm font-medium">ライブを追加</a>
    </div>
</div>

{% if upcoming %}
<h2 class="text-lg font-bold mb-3">予定のライブ</h2>
<div class="grid gap-4 mb-8">
    {% for event in upcoming %}
    <a href="{% url 'livelog:event_detail' event.pk %}" class="block bg-white dark:bg-gray-800 rounded-xl p-5 border border-primary-200 dark:border-primary-800 hover:shadow-lg transition">
        <div class="flex justify-between items-start">
            <div>
                <div class="text-lg font-bold">{{ event.artist }}</div>
                {% if event.title %}<div class="text-sm text-gray-500 dark:text-gray-400">{{ event.title }}</div>{% endif %}
                <div class="flex gap-3 mt-2 text-sm text-gray-500 dark:text-gray-400">
                    <span>{{ event.date|date:"Y/m/d" }}</span>
                    {% if event.venue %}<span>{{ event.venue }}</span>{% endif %}
                </div>
            </div>
            <div class="text-primary-600 dark:text-primary-400 font-bold" x-data x-text="(() => { const d = Math.ceil((new Date('{{ event.date|date:'Y-m-d' }}') - new Date()) / 86400000); return d === 0 ? '今日！' : 'あと' + d + '日'; })()"></div>
        </div>
    </a>
    {% endfor %}
</div>
{% endif %}

{% if past %}
<h2 class="text-lg font-bold mb-3">過去のライブ</h2>
<div class="grid gap-3">
    {% for event in past %}
    <a href="{% url 'livelog:event_detail' event.pk %}" class="block bg-white dark:bg-gray-800 rounded-lg p-4 border border-gray-200 dark:border-gray-700 hover:shadow-md transition">
        <div class="flex justify-between items-center">
            <div>
                <span class="font-bold">{{ event.artist }}</span>
                {% if event.title %}<span class="text-sm text-gray-500 dark:text-gray-400 ml-2">{{ event.title }}</span>{% endif %}
            </div>
            <div class="text-sm text-gray-500 dark:text-gray-400">
                {{ event.date|date:"Y/m/d" }}
                {% if event.venue %} @ {{ event.venue }}{% endif %}
            </div>
        </div>
    </a>
    {% endfor %}
</div>
{% endif %}

{% if not upcoming and not past %}
<div class="text-center py-12 text-gray-500 dark:text-gray-400">
    ライブ記録がまだありません
</div>
{% endif %}
{% endblock %}
