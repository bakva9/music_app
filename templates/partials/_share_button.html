{# Usage: include "partials/_share_button.html" with share_title="..." share_text="..." #}
<div x-data="{ copied: false }" class="inline-flex">
    <button @click="
        if (navigator.share) {
            navigator.share({ title: '{{ share_title|escapejs }}', text: '{{ share_text|escapejs }}', url: window.location.href }).catch(() => {});
        } else {
            navigator.clipboard.writeText(window.location.href).then(() => { copied = true; setTimeout(() => copied = false, 2000); });
        }
    " class="p-2 rounded-lg hover:bg-white/10 transition-colors text-white/50 hover:text-white/80" :title="copied ? 'コピーしました' : '共有'">
        <svg x-show="!copied" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="1.5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.935-2.186 2.25 2.25 0 0 0-3.935 2.186Z"/>
        </svg>
        <svg x-show="copied" x-cloak class="w-5 h-5 text-aurora" fill="none" stroke="currentColor" viewBox="0 0 24 24" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5"/>
        </svg>
    </button>
</div>
